<?xml version='1.0'?>
<robot name="ezrassor" xmlns:xacro="http://www.ros.org/wiki/xacro">
    <!-- Macro defining the wheel geometry (cylinder) -->
    <xacro:macro name="wheel_mesh">
        <cylinder radius="0.18" length="0.2"/>
    </xacro:macro>

    <!-- The wheel module macro (if it were used) -->
    <xacro:macro name="ezrassor_wheel" params="wheel_prefix parent xyz rpy yaw">
        <link name="${wheel_prefix}">
            <inertial>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <xacro:call macro="cylinder_inertia" m="5" r="0.18" h="0.2"/>
            </inertial>
            <visual name="${wheel_prefix}_visual">
                <origin xyz="0 0 0" rpy="0 0 ${yaw}"/>
                <geometry>
                    <xacro:wheel_mesh/>
                </geometry>
            </visual>
            <collision name="${wheel_prefix}_collision">
                <origin xyz="0 0 0" rpy="0 0 ${yaw}"/>
                <geometry>
                    <xacro:wheel_mesh/>
                </geometry>
                <surface>
                    <friction>
                        <mu>1.5</mu>
                        <mu2>1.5</mu2>
                    </friction>
                </surface>
            </collision>
        </link>
        <joint name="${wheel_prefix}_joint" type="continuous">
            <origin xyz="${xyz}" rpy="${rpy}"/>
            <parent link="${parent}"/>
            <child link="${wheel_prefix}"/>
            <axis xyz="0 1 0"/>
            <limit effort="1000" velocity="5"/>
        </joint>
    </xacro:macro>
</robot>
